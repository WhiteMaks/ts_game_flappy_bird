(()=>{"use strict";var t={9719:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});const r=s.p+"70bc56cc1144d8c4e7440f2e63d61bbf.png"},6584:(t,e,s)=>{s.r(e),s.d(e,{default:()=>r});const r=s.p+"82b09639403d51e592e9a874cccf959b.png"},1969:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(6668);class i extends r.default{constructor(t,e){super(t,e)}}e.default=i},4105:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(1114),i=s(9693),a=s(3951),n=s(4775),o=s(846),h=s(9380),l=s(2417),u=s(2420),c=s(3325),d=s(7201),f=s(4359),g=s(6584),x=s(8277),p=s(2674);class y extends r.default{constructor(t){super("Game layer"),this.graphicsElement=t,this.color=new i.default(1,0,1,1)}attach(){const t=new n.default([(0,o.NewBufferElement)(h.default.FLOAT_2,"a_Position"),(0,o.NewBufferElement)(h.default.FLOAT_2,"a_TextureCoordinate")]),e=this.graphicsElement.getGraphicsContext(),s=l.default.createFloat32VertexStaticBuffer(e,[-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]);s.setLayout(t);const r=l.default.createUint16IndexStaticBuffer(e,[0,1,2,2,3,0]);this.vertexArray=l.default.createVertexArrayBuffer(e),this.vertexArray.addVertexBuffer(s),this.vertexArray.setIndexBuffer(r),this.vertexArray.unbind(),s.unbind(),r.unbind(),this.shaderProgram=u.default.createProgram(e,"First shader program",f.textureVertexShaderCode,f.textureFragmentShaderCode),this.shaderProgram.bind(),c.default.shaderProgramLibrary.add(this.shaderProgram);const i=new Image;i.src=g.default,this.obstacleTexture=d.default.create2DTexture(e,i,4),this.obstacleTexture.bind(0),this.shaderProgram.setVector4f("u_Color",this.color),this.shaderProgram.unbind(),this.level=new x.default(e,this.shaderProgram,this.vertexArray),this.cameraController=new a.default(this.graphicsElement,this.level.getPlayer())}detach(){}keyboardInput(t){this.cameraController.keyboardInput(t),t.getCode()===p.default.SPACE.valueOf()&&this.level.start()}mouseInput(t){this.cameraController.mouseInput(t)}update(t){this.level.isPause()||(this.level.isGameOver()&&(this.level.restart(),this.cameraController.update(t),this.level.update(t)),this.cameraController.update(t),this.level.update(t))}render(){c.default.renderer.begin(this.cameraController.getCamera()),this.level.render(),c.default.renderer.end()}clean(){var t,e,s;null===(t=this.vertexArray)||void 0===t||t.clean(),null===(e=this.shaderProgram)||void 0===e||e.clean(),null===(s=this.obstacleTexture)||void 0===s||s.clean(),this.level.clean()}}e.default=y},3325:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(1893),i=s(9921),a=s(9663),n=s(4353),o=s(3665),h=s(9878),l=s(6682),u=s(2152),c=s(2943),d=s(9693),f=s(4105);class g{constructor(){i.default.setAPI(o.default.WEB_GL),this.mouse=new a.default(16),this.keyboard=new n.default(16),l.default.instance=new h.default(this.mouse,this.keyboard),this.layerStack=new u.default,this.spaceColor=new d.default(.05,.05,.05,1)}init(t){const e=t.getGraphicsContext();g.renderer=c.default.create(e),g.renderer.init(e);const s=new f.default(t);this.layerStack.push(s);const r=t.getCanvasElement();this.addMouseListener(r),this.addKeyboardListener(r)}input(){this.mouseInput(),this.keyboardInput()}update(t){const e=this.layerStack.getLayers();for(let s of e)s.update(t);this.mouse.updateDirection()}render(){g.renderer.setClearColor(this.spaceColor),g.renderer.clear();const t=this.layerStack.getLayers();for(let e of t)e.render()}clean(){this.mouse.flush(),this.keyboard.flush();const t=this.layerStack.getLayers();for(let e of t)e.clean();g.shaderProgramLibrary.clean()}addMouseListener(t){t.addEventListener("mousedown",(t=>{0!==t.button?2!==t.button||this.mouse.onRightKeyPressed(t.offsetX,t.offsetY):this.mouse.onLeftKeyPressed(t.offsetX,t.offsetY)})),t.addEventListener("mouseup",(t=>{0!==t.button?2!==t.button||this.mouse.onRightKeyReleased(t.offsetX,t.offsetY):this.mouse.onLeftKeyReleased(t.offsetX,t.offsetY)})),t.addEventListener("mousemove",(t=>this.mouse.onMouseMove(t.offsetX,t.offsetY))),t.addEventListener("mouseenter",(()=>this.mouse.onMouseEnter())),t.addEventListener("mouseleave",(()=>this.mouse.onMouseLeave()))}addKeyboardListener(t){document.addEventListener("keydown",(t=>this.keyboard.onKeyPressed(t.code)),!1),document.addEventListener("keyup",(t=>this.keyboard.onKeyReleased(t.code)),!1),document.addEventListener("keypress",(t=>this.keyboard.onChar(t.key)),!1)}mouseInput(){const t=this.mouse.read();if(t.isValid()){const e=this.layerStack.getLayers().reverse();for(let s of e)s.mouseInput(t)}}keyboardInput(){const t=this.keyboard.readKey();if(t.isValid()){const e=this.layerStack.getLayers().reverse();for(let s of e)s.keyboardInput(t)}}}g.shaderProgramLibrary=new r.default,e.default=g},8277:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(7581),i=s(758),a=s(9719),n=s(6584),o=s(1761),h=s(7201);e.default=class{constructor(t,e,s){this.context=t,this.shaderProgram=e,this.arrayBuffer=s,this.obstacleOffset=1.1,this.maxObstaclesCount=4,this.gameOver=!1,this.pause=!0;const o=new Image;o.src=a.default,this.player=new r.default(t,new i.default(0,0,0),o),this.obstacles=[];const l=new Image;l.src=n.default,this.obstacleTexture=h.default.create2DTexture(t,l,4),this.obstacleTexture.bind(0);for(let t=0;t<this.maxObstaclesCount;t++)this.createObstacle(t*this.obstacleOffset+1.5)}update(t){this.player.update(t),this.collisionTest()&&(this.gameOver=!0),this.player.getPosition().getX()>this.obstacles[2].getPosition().getX()&&(this.createObstacle(this.obstacles[this.obstacles.length-1].getPosition().getX()+this.obstacleOffset),this.obstacles.shift(),this.obstacles.shift())}render(){this.shaderProgram.bind();for(const t of this.obstacles)t.render(this.shaderProgram,this.arrayBuffer);this.player.render(this.shaderProgram,this.arrayBuffer)}getPlayer(){return this.player}collisionTest(){const t=this.player.getPosition();if(Math.abs(t.getY())>1)return!0;const e=this.player.getCollision();for(const t of this.obstacles){const s=t.getCollision();if(this.checkSquareCollisions(e[0],e[1],e[2]-e[0],e[7]-e[1],s[0],s[1],s[2]-s[0],s[7]-s[1]))return!0}return!1}checkSquareCollisions(t,e,s,r,i,a,n,o){return t+s>=i&&t<=i+n&&e+r>=a&&e<=a+o}createObstacle(t){const e=.2*Math.random(),s=.5*Math.random()-.25,r=new o.default(this.context,new i.default(t,s-.6-e,0),new i.default(0,0,0),this.obstacleTexture);this.obstacles.push(r);const a=new o.default(this.context,new i.default(t,s+.6+e,0),new i.default(0,0,180),this.obstacleTexture);this.obstacles.push(a)}isGameOver(){return this.gameOver}isPause(){return this.pause}start(){this.pause=!1}restart(){this.player.reset(),this.obstacles=[];for(let t=0;t<this.maxObstaclesCount;t++)this.createObstacle(t*this.obstacleOffset+1.5);this.gameOver=!1,this.pause=!0}clean(){for(const t of this.obstacles)t.clean();this.player.clean()}}},1761:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(758),i=s(3325),a=s(8144);e.default=class{constructor(t,e,s,i){this.position=e,this.rotation=s,this.scale=new r.default(.1,1,1),this.texture=i}render(t,e){i.default.renderer.drawTrianglesWithTexture(t,e,a.default.getWorldMatrix(this.position,this.rotation,this.scale),this.texture)}getPosition(){return this.position}getCollision(){return[-.5*this.scale.getX()+this.position.getX(),-.5*this.scale.getY()+this.position.getY(),.5*this.scale.getX()+this.position.getX(),-.5*this.scale.getY()+this.position.getY(),.5*this.scale.getX()+this.position.getX(),.5*this.scale.getY()+this.position.getY(),-.5*this.scale.getX()+this.position.getX(),.5*this.scale.getY()+this.position.getY()]}clean(){this.texture.clean()}}},3951:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(2750);class i extends r.default{constructor(t,e){super(t),this.player=e}updateImpl(t){const e=this.camera.getPosition(),s=this.player.getPosition();e.setX(s.getX())}keyboardInput(t){}mouseInput(t){}}e.default=i},7581:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(758),i=s(7201),a=s(3325),n=s(8144),o=s(6682),h=s(2674);e.default=class{constructor(t,e,s){this.position=e,this.rotation=new r.default(0,0,0),this.scale=new r.default(.1,.1,1),this.velocity=new r.default(7e-4,0,0),this.jumpPower=5e-5,this.gravity=4e-5,this.texture=i.default.create2DTexture(t,s,4),this.texture.bind(0)}reset(){this.position.setX(0),this.position.setY(0),this.position.setZ(0),this.rotation.setZ(0),this.velocity.setY(0)}update(t){let e;e=o.default.isKeyboardKeyPressed(h.default.SPACE)?this.velocity.getY()+this.jumpPower:this.velocity.getY()-this.gravity,e=this.clamp(e,-.002,.002),this.velocity.setY(e),this.position.setX(this.position.getX()+this.velocity.getX()*t.getDeltaTime()),this.position.setY(this.position.getY()+this.velocity.getY()*t.getDeltaTime()),this.rotation.setZ(4e4*this.velocity.getY())}render(t,e){a.default.renderer.drawTrianglesWithTexture(t,e,n.default.getWorldMatrix(this.position,this.rotation,this.scale),this.texture)}getPosition(){return this.position}clean(){this.texture.clean()}getCollision(){return[-.5*this.scale.getX()+this.position.getX(),-.5*this.scale.getY()+this.position.getY(),.5*this.scale.getX()+this.position.getX(),-.5*this.scale.getY()+this.position.getY(),.5*this.scale.getX()+this.position.getX(),.5*this.scale.getY()+this.position.getY(),-.5*this.scale.getX()+this.position.getX(),.5*this.scale.getY()+this.position.getY()]}clamp(t,e,s){return t>s?s:t<e?e:t}}},4359:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.textureFragmentShaderCode=e.textureVertexShaderCode=void 0,e.textureVertexShaderCode="#version 300 es\n\nlayout (location = 0) in vec4 position;\nlayout (location = 1) in vec2 texCoord;\n\nout vec2 v_TexCoord;\n\nuniform mat4 u_ViewProjectionMatrix;\nuniform mat4 u_WorldMatrix;\n\nvoid main() {\n    v_TexCoord = vec2(texCoord.x, 1.0f - texCoord.y);\n    gl_Position = u_ViewProjectionMatrix * u_WorldMatrix * position;\n}",e.textureFragmentShaderCode="#version 300 es\n\nprecision lowp float; //модификатор точности для фрагментного шейдера\n\nin vec2 v_TexCoord;\n\nuniform sampler2D u_Texture;\nuniform vec4 u_Color;\n\nout vec4 fragColor; //выходная переменная итогового цвета\n\nvoid main() {\n    vec4 textColor = texture(u_Texture, v_TexCoord) * u_Color;\n    fragColor = textColor;\n}"},9878:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(6682);class i extends r.default{constructor(t,e){super(),this.mouse=t,this.keyboard=e}isKeyboardKeyPressedImpl(t){return this.keyboard.keyIsPressed(t)}isLeftMouseKeyPressedImpl(){return this.mouse.isLeftKeyPressed()}isRightMouseKeyPressedImpl(){return this.mouse.isRightKeyPressed()}}e.default=i},6682:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){}static isKeyboardKeyPressed(t){return this.instance.isKeyboardKeyPressedImpl(t)}static isLeftMouseKeyPressed(){return this.instance.isLeftMouseKeyPressedImpl()}static isRightMouseKeyPressed(){return this.instance.isRightMouseKeyPressedImpl()}}},2674:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.A="KeyA",t.B="KeyB",t.C="KeyC",t.D="KeyD",t.E="KeyE",t.F="KeyF",t.G="KeyG",t.H="KeyH",t.I="KeyI",t.J="KeyJ",t.K="KeyK",t.L="KeyL",t.M="KeyM",t.N="KeyN",t.O="KeyO",t.P="KeyP",t.Q="KeyQ",t.R="KeyR",t.S="KeyS",t.T="KeyT",t.U="KeyU",t.V="KeyV",t.W="KeyW",t.X="KeyX",t.Y="KeyY",t.Z="KeyZ",t.LEFT_SHIFT="ShiftLeft",t.LEFT_CTR="ControlLeft",t.SPACE="Space"}(s||(s={})),e.default=s},4353:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(8590),i=s(9476),a=s(6686);e.default=class{constructor(t){this.bufferSize=16,this.bufferSize=t,this.keyBuffer=new r.default,this.charBuffer=new r.default,this.keyStates=new Map}keyIsPressed(t){return this.keyStates.get(t)||(this.keyStates.set(t,!1),!1)}readKey(){return this.keyBuffer.size()>0?this.keyBuffer.poll():new a.default(i.default.INVALID,"")}keyIsEmpty(){return 0===this.keyBuffer.size()}readChar(){return this.charBuffer.size()>0?this.charBuffer.poll():""}charIsEmpty(){return 0===this.charBuffer.size()}flushKey(){this.keyBuffer.flush()}flushChar(){this.charBuffer.flush()}flush(){this.flushKey(),this.flushChar()}onKeyPressed(t){this.keyStates.set(t,!0),this.keyBuffer.push(new a.default(i.default.PRESS,t)),this.trimBuffer(this.keyBuffer)}onKeyReleased(t){this.keyStates.set(t,!1),this.keyBuffer.push(new a.default(i.default.RELEASE,t)),this.trimBuffer(this.keyBuffer)}onChar(t){this.charBuffer.push(t),this.trimBuffer(this.charBuffer)}trimBuffer(t){for(;t.size()>this.bufferSize;)t.poll()}}},6686:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9476);e.default=class{constructor(t,e){this.type=t,this.code=e}isPress(){return this.type===r.default.PRESS}isRelease(){return this.type===r.default.RELEASE}isValid(){return this.type!==r.default.INVALID}getCode(){return this.code}}},9476:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.PRESS=0]="PRESS",t[t.RELEASE=1]="RELEASE",t[t.INVALID=2]="INVALID"}(s||(s={})),e.default=s},9663:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(8590),i=s(2250),a=s(8477);e.default=class{constructor(t){this.bufferSize=t,this.buffer=new r.default,this.directionX=0,this.directionY=0,this.positionX=0,this.positionY=0,this.previousPositionX=0,this.previousPositionY=0,this.leftKeyIsPressed=!1,this.rightKeyIsPressed=!1,this.inFocus=!1}getPositionX(){return this.positionX}getPositionY(){return this.positionY}isInFocus(){return this.inFocus}isLeftKeyPressed(){return this.leftKeyIsPressed}isRightKeyPressed(){return this.rightKeyIsPressed}read(){return this.buffer.size()>0?this.buffer.poll():this.generateEvent(i.default.INVALID)}flush(){this.buffer.flush()}onMouseMove(t,e){this.positionX=t,this.positionY=e,this.buffer.push(this.generateEvent(i.default.MOVE)),this.trimBuffer()}onMouseLeave(){this.inFocus=!1,this.buffer.push(this.generateEvent(i.default.LEAVE)),this.trimBuffer()}onMouseEnter(){this.inFocus=!0,this.buffer.push(this.generateEvent(i.default.ENTER)),this.trimBuffer()}onLeftKeyPressed(t,e){this.leftKeyIsPressed=!0,this.buffer.push(this.generateEvent(i.default.L_PRESS)),this.trimBuffer()}onLeftKeyReleased(t,e){this.leftKeyIsPressed=!1,this.buffer.push(this.generateEvent(i.default.L_RELEASE)),this.trimBuffer()}onRightKeyPressed(t,e){this.rightKeyIsPressed=!0,this.buffer.push(this.generateEvent(i.default.R_PRESS)),this.trimBuffer()}onRightKeyReleased(t,e){this.rightKeyIsPressed=!1,this.buffer.push(this.generateEvent(i.default.R_RELEASE)),this.trimBuffer()}onWheelUp(t,e){this.buffer.push(this.generateEvent(i.default.WHEEL_UP)),this.trimBuffer()}onWheelDown(t,e){this.buffer.push(this.generateEvent(i.default.WHEEL_DOWN)),this.trimBuffer()}updateDirection(){this.directionX=0,this.directionY=0,this.previousPositionX>0&&this.previousPositionY>0&&(this.directionX=this.positionY-this.previousPositionY,this.directionY=this.positionX-this.previousPositionX),this.previousPositionX=this.positionX,this.previousPositionY=this.positionY}getDirectionX(){return this.directionX}getDirectionY(){return this.directionY}trimBuffer(){for(;this.buffer.size()>this.bufferSize;)this.buffer.poll()}generateEvent(t){return new a.default(t,this.leftKeyIsPressed,this.rightKeyIsPressed,this.positionX,this.positionY)}}},8477:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(2250);e.default=class{constructor(t,e,s,r,i){this.type=t,this.leftKeyIsPressed=e,this.rightKeyIsPressed=s,this.positionX=r,this.positionY=i}isValid(){return this.type!==r.default.INVALID}getPositionX(){return this.positionX}getPositionY(){return this.positionY}getType(){return this.type}isLeftKeyIsPressed(){return this.leftKeyIsPressed}isRightKeyIsPressed(){return this.rightKeyIsPressed}}},2250:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.L_PRESS=0]="L_PRESS",t[t.L_RELEASE=1]="L_RELEASE",t[t.R_PRESS=2]="R_PRESS",t[t.R_RELEASE=3]="R_RELEASE",t[t.WHEEL_UP=4]="WHEEL_UP",t[t.WHEEL_DOWN=5]="WHEEL_DOWN",t[t.MOVE=6]="MOVE",t[t.ENTER=7]="ENTER",t[t.LEAVE=8]="LEAVE",t[t.INVALID=9]="INVALID"}(s||(s={})),e.default=s},8590:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.array=[]}peek(){return this.array[0]}poll(){let t=this.array.shift();if(!t)throw new Error("Нет элементов в очереди");return t}push(t){this.array.push(t)}size(){return this.array.length}flush(){for(;0!==this.size();)this.poll()}}},5657:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(8581);class i extends r.default{constructor(t,e){super(t,new Float32Array(e),e.length)}}e.default=i},4382:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s){this.gl=t,this.buffer=t.createBuffer(),this.count=s,this.bind(),t.elementArrayBufferStaticData(e)}bind(){this.gl.bindElementArrayBuffer(this.buffer)}unbind(){this.gl.bindElementArrayBuffer(this.buffer)}getCount(){return this.count}clean(){this.gl.deleteBuffer(this.buffer)}setLayout(t){throw new Error("setLayout: not implemented method")}getLayout(){throw new Error("getLayout: not implemented method")}}},937:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(4382);class i extends r.default{constructor(t,e){super(t,new Uint16Array(e),e.length)}}e.default=i},6566:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9380);e.default=class{constructor(t){this.gl=t,this.vertexBuffers=[],this.indexBuffer=null,this.buffer=t.createVertexArray(),this.bind()}getCount(){return 0}addVertexBuffer(t){this.bind(),t.bind();const e=t.getLayout(),s=t.getLayout().getElements();for(let t=0;t<s.length;t++){const i=s[t];switch(this.gl.enableVertexAttribArray(t),i.type){case r.default.FLOAT_4:case r.default.FLOAT_3:case r.default.FLOAT_2:case r.default.FLOAT_1:this.gl.vertexAttribPointerFloat(t,(0,r.getComponentCountFromShaderDataType)(i.type),i.normalized,e.getStride(),i.offset);break;case r.default.INT_4:case r.default.INT_3:case r.default.INT_2:case r.default.INT_1:this.gl.vertexAttribPointerUint(t,(0,r.getComponentCountFromShaderDataType)(i.type),i.normalized,e.getStride(),i.offset);break;default:throw new Error("ShaderDataType [ "+i.type+" ] not supported")}}this.vertexBuffers.push(t)}setIndexBuffer(t){this.bind(),t.bind(),this.indexBuffer=t}bind(){this.gl.bindVertexArray(this.buffer)}unbind(){this.gl.unbindVertexArray()}clean(){var t;this.gl.deleteVertexArray(this.buffer);for(const t of this.vertexBuffers)t.clean();null===(t=this.indexBuffer)||void 0===t||t.clean()}setLayout(t){throw new Error("setLayout: not implemented method")}getLayout(){throw new Error("getLayout: not implemented method")}getVertexBuffers(){return this.vertexBuffers}getIndexBuffer(){return this.indexBuffer}}},8581:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s){this.gl=t,this.buffer=t.createBuffer(),this.count=s,this.layout=null,this.bind(),t.arrayBufferStaticData(e)}bind(){this.gl.bindArrayBuffer(this.buffer)}unbind(){this.gl.unbindArrayBuffer()}getCount(){return this.count}clean(){this.gl.deleteBuffer(this.buffer)}setLayout(t){this.layout=t}getLayout(){return this.layout}}},9447:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9436);e.default=class{constructor(t){this.canvasElement=t;const e=this.canvasElement.getContext("webgl2");if(!e)throw new Error("Невозможно проинициализировать WebGL. Данный браузер не поддерживает данный контекст [ webgl2 ]");this.gl=new r.default(e)}init(){}setViewport(t,e,s,r){this.gl.setViewport(t,e,s,r)}printDebugInfo(){console.log("Vendor: "+this.gl.getVendor()),console.log("Renderer: "+this.gl.getRenderer())}getGL(){return this.gl}}},4355:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9921);class i extends r.default{constructor(t){super(),this.gl=t}clear(){this.gl.clearColorBuffer(),this.gl.clearDepthBuffer()}setClearColor(t){this.gl.clearColor(t.getX(),t.getY(),t.getZ(),t.getW())}drawTrianglesImpl(t){this.gl.drawTriangleElementsUshort(t.getIndexBuffer().getCount(),0)}initImpl(){this.gl.enableDepthTest(),this.gl.enableBlend(),this.gl.blendFuncSrcAlphaOneMinusSrcAlpha()}}e.default=i},8525:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s,r=!1){if(this.gl=t,this.texture=this.gl.createTexture(),r)return this.prepareTexture(),void this.gl.texImage2DRGBAUbyteWithPixels(0,e,new Uint8Array([255,255,255,255]));e.onload=()=>{this.prepareTexture(),4===s&&this.gl.texImage2DRGBAUbyte(0,e),3===s&&this.gl.texImage2DRGBUbyte(0,e)}}bind(t){this.gl.activeTexture(t),this.gl.bindTexture2D(this.texture)}unbind(){this.gl.unbindTexture2D()}clean(){this.gl.deleteTexture(this.texture)}prepareTexture(){this.gl.bindTexture2D(this.texture),this.gl.tex2DParameteriMinFilterLinear(),this.gl.tex2DParameteriMagFilterNearest(),this.gl.tex2DParameteriWrapSClampToEdge(),this.gl.tex2DParameteriWrapTClampToEdge()}}},5023:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.gl=t,this.vs=this.gl.createFragmentShader(),this.gl.setShaderSource(this.vs,e)}getShader(){return this.vs}clean(){this.gl.deleteShader(this.vs)}}},1253:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s,r){this.locationsCache=new Map,this.gl=t,this.name=e,this.vertexShader=s,this.fragmentShader=r,this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader.getShader()),this.gl.attachShader(this.program,this.fragmentShader.getShader()),this.gl.linkProgram(this.program),this.vertexShader.clean(),this.fragmentShader.clean()}getName(){return this.name}bind(){this.gl.useProgram(this.program)}unbind(){this.gl.removeProgram()}setVector3f(t,e){this.gl.uniform3f(this.getUniformLocation(t),e)}setVector4f(t,e){this.gl.uniform4f(this.getUniformLocation(t),e)}setValue1i(t,e){this.gl.uniform1i(this.getUniformLocation(t),e)}setMatrix4f(t,e){this.gl.uniformMatrix4fv(this.getUniformLocation(t),!1,new Float32Array(e.getArray()))}getUniformLocation(t){let e=this.locationsCache.get(t);return e||(e=this.gl.getUniformLocation(this.program,t),this.locationsCache.set(t,e)),e}clean(){this.vertexShader.clean(),this.fragmentShader.clean(),this.gl.deleteProgram(this.program)}}},4264:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e){this.gl=t,this.vs=this.gl.createVertexShader(),this.gl.setShaderSource(this.vs,e)}getShader(){return this.vs}clean(){this.gl.deleteShader(this.vs)}}},9436:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.context=t,this.clearColor(0,0,0,1);const e=this.context.getExtension("WEBGL_debug_renderer_info");e?(this.vendor=this.context.getParameter(e.UNMASKED_VENDOR_WEBGL),this.renderer=this.context.getParameter(e.UNMASKED_RENDERER_WEBGL)):(this.vendor="HIDDEN",this.renderer="HIDDEN")}enableDepthTest(){this.context.enable(this.context.DEPTH_TEST)}enableBlend(){this.context.enable(this.context.BLEND)}disableBlend(){this.context.disable(this.context.BLEND)}blendFuncSrcAlphaOneMinusSrcAlpha(){this.context.blendFunc(this.context.SRC_ALPHA,this.context.ONE_MINUS_SRC_ALPHA)}clearColor(t,e,s,r){this.context.clearColor(t,e,s,r)}clearColorBuffer(){this.context.clear(this.context.COLOR_BUFFER_BIT)}clearDepthBuffer(){this.context.clear(this.context.DEPTH_BUFFER_BIT)}setViewport(t,e,s,r){this.context.viewport(0,0,s,r)}createVertexShader(){let t=this.context.createShader(this.context.VERTEX_SHADER);if(!t)throw new Error("Ошибка создания вершинного шейдера");return t}createFragmentShader(){let t=this.context.createShader(this.context.FRAGMENT_SHADER);if(!t)throw new Error("Ошибка создания фрагментного шейдера");return t}deleteShader(t){this.context.deleteShader(t)}setShaderSource(t,e){if(this.context.shaderSource(t,e),this.context.compileShader(t),!this.context.getShaderParameter(t,this.context.COMPILE_STATUS)){const e=this.context.getShaderInfoLog(t);throw this.deleteShader(t),new Error(null!=e?e:"Ошибка компиляции шейдера")}}createProgram(){let t=this.context.createProgram();if(!t)throw new Error("Ошибка создания программы");return t}deleteProgram(t){this.context.deleteProgram(t)}attachShader(t,e){this.context.attachShader(t,e)}linkProgram(t){if(this.context.linkProgram(t),!this.context.getProgramParameter(t,this.context.LINK_STATUS)){const e=this.context.getProgramInfoLog(t);throw new Error(null!=e?e:"Ошибка связывания программы с шейдерами")}}useProgram(t){this.context.useProgram(t)}removeProgram(){this.context.useProgram(null)}createVertexArray(){let t=this.context.createVertexArray();if(!t)throw new Error("Ошибка создания VAO");return t}deleteVertexArray(t){this.context.deleteVertexArray(t)}bindVertexArray(t){this.context.bindVertexArray(t)}unbindVertexArray(){this.context.bindVertexArray(null)}createTexture(){const t=this.context.createTexture();if(!t)throw new Error("Ошибка создания текстуры");return t}deleteTexture(t){this.context.deleteTexture(t)}unbindTexture2D(){this.context.bindTexture(this.context.TEXTURE_2D,null)}bindTexture2D(t){this.context.bindTexture(this.context.TEXTURE_2D,t)}tex2DParameteriMinFilterLinear(){this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MIN_FILTER,this.context.LINEAR)}tex2DParameteriMagFilterLinear(){this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MAG_FILTER,this.context.LINEAR)}tex2DParameteriMagFilterNearest(){this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_MAG_FILTER,this.context.NEAREST)}tex2DParameteriWrapSClampToEdge(){this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_S,this.context.CLAMP_TO_EDGE)}tex2DParameteriWrapTClampToEdge(){this.context.texParameteri(this.context.TEXTURE_2D,this.context.TEXTURE_WRAP_T,this.context.CLAMP_TO_EDGE)}texImage2DRGBAUbyteWithPixels(t,e,s){this.context.texImage2D(this.context.TEXTURE_2D,t,this.context.RGBA8,e.width,e.height,0,this.context.RGBA,this.context.UNSIGNED_BYTE,s)}texImage2DRGBAUbyte(t,e){this.context.texImage2D(this.context.TEXTURE_2D,t,this.context.RGBA8,e.width,e.height,0,this.context.RGBA,this.context.UNSIGNED_BYTE,e)}texImage2DRGBUbyte(t,e){this.context.texImage2D(this.context.TEXTURE_2D,t,this.context.RGB8,e.width,e.height,0,this.context.RGB,this.context.UNSIGNED_BYTE,e)}generateMipmap2D(){this.context.generateMipmap(this.context.TEXTURE_2D)}createBuffer(){const t=this.context.createBuffer();if(!t)throw new Error("Ошибка создания буфера");return t}deleteBuffer(t){this.context.deleteBuffer(t)}bindArrayBuffer(t){this.context.bindBuffer(this.context.ARRAY_BUFFER,t)}unbindArrayBuffer(){this.context.bindBuffer(this.context.ARRAY_BUFFER,null)}bindElementArrayBuffer(t){this.context.bindBuffer(this.context.ELEMENT_ARRAY_BUFFER,t)}arrayBufferStaticData(t){this.context.bufferData(this.context.ARRAY_BUFFER,t,this.context.STATIC_DRAW)}elementArrayBufferStaticData(t){this.context.bufferData(this.context.ELEMENT_ARRAY_BUFFER,t,this.context.STATIC_DRAW)}enableVertexAttribArray(t){this.context.enableVertexAttribArray(t)}disableVertexAttribArray(t){this.context.disableVertexAttribArray(t)}vertexAttribPointerFloat(t,e,s,r,i){this.context.vertexAttribPointer(t,e,this.context.FLOAT,s,r,i)}vertexAttribPointerUint(t,e,s,r,i){this.context.vertexAttribPointer(t,e,this.context.UNSIGNED_INT,s,r,i)}drawTriangleArrays(t,e){this.context.drawArrays(this.context.TRIANGLES,t,e)}drawTriangleElementsUshort(t,e){this.context.drawElements(this.context.TRIANGLES,t,this.context.UNSIGNED_SHORT,e)}drawTriangleElementsUint(t,e){this.context.drawElements(this.context.TRIANGLES,t,this.context.UNSIGNED_INT,e)}drawLineElementsUshort(t,e){this.context.drawElements(this.context.LINES,t,this.context.UNSIGNED_SHORT,e)}getUniformLocation(t,e){const s=this.context.getUniformLocation(t,e);if(!s)throw new Error("Ошибка получения униформы с именем [ "+e+" ]");return s}uniformMatrix4fv(t,e,s){this.context.uniformMatrix4fv(t,e,s)}uniform3f(t,e){this.context.uniform3f(t,e.getX(),e.getY(),e.getZ())}uniform4f(t,e){this.context.uniform4f(t,e.getX(),e.getY(),e.getZ(),e.getW())}uniform1i(t,e){this.context.uniform1i(t,e)}uniformF(t,e){this.context.uniform1f(t,e)}activeTexture(t){this.context.activeTexture(this.context.TEXTURE0+t)}getVendor(){return this.vendor}getRenderer(){return this.renderer}}},846:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NewBufferElement=void 0,e.NewBufferElement=function(t,e,s=!1){return{type:t,name:e,size:t.valueOf(),offset:0,normalized:s}}},4775:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.elements=t,this.stride=0,this.calculateStride()}getElements(){return this.elements}getStride(){return this.stride}calculateStride(){let t=0;for(const e of this.elements)e.offset=t,t+=e.size,this.stride+=e.size}}},2750:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(2590),i=s(2107);class a extends r.default{constructor(t){super(new i.default(t)),this.zoomLevel=1}}e.default=a},2590:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.camera=t}update(t){this.camera.update(),this.updateImpl(t)}getCamera(){return this.camera}}},2107:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(8144),i=s(1507);class a extends i.default{constructor(t){super(r.default.getOrthogonalProjectionMatrix(-1*t.getWidth()/t.getHeight(),t.getWidth()/t.getHeight(),-1,1,-1,1)),this.graphicsElement=t}update(){this.recalculateViewMatrix(),this.recalculateProjectionMatrix(),this.recalculateViewProjectionMatrix()}recalculateViewMatrix(){this.viewMatrix=r.default.getViewMatrix(this.position,this.rotation)}recalculateProjectionMatrix(){const t=this.graphicsElement.getWidth()/this.graphicsElement.getHeight();this.projectionMatrix=r.default.getOrthogonalProjectionMatrix(-1*t,t,-1,1,-1,1)}recalculateViewProjectionMatrix(){this.viewProjectionMatrix=this.viewMatrix.multiplyMatrix(this.projectionMatrix)}}e.default=a},1507:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(758),i=s(8144);e.default=class{constructor(t){this.projectionMatrix=t,this.position=new r.default(0,0,0),this.rotation=new r.default(0,0,0),this.viewMatrix=i.default.getViewMatrix(this.position,this.rotation),this.viewProjectionMatrix=this.viewMatrix.multiplyMatrix(this.projectionMatrix)}getPosition(){return this.position}getProjectionMatrix(){return this.projectionMatrix}getRotation(){return this.rotation}getViewMatrix(){return this.viewMatrix}getViewProjectionMatrix(){return this.viewProjectionMatrix}setPosition(t){this.position=t}setRotation(t){this.rotation=t}}},2417:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9921),i=s(3665),a=s(6566),n=s(937),o=s(5657);e.default=class{static createFloat32VertexStaticBuffer(t,e){if(r.default.getAPI()===i.default.WEB_GL){const s=t.getGL();return new o.default(s,e)}}static createUint16IndexStaticBuffer(t,e){if(r.default.getAPI()===i.default.WEB_GL){const s=t.getGL();return new n.default(s,e)}}static createVertexArrayBuffer(t){if(r.default.getAPI()===i.default.WEB_GL){const e=t.getGL();return new a.default(e)}}}},8632:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(3665),i=s(9447),a=s(9921);e.default=class{static createContext(t){if(a.default.getAPI()===r.default.WEB_GL)return new i.default(t)}}},2943:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9921),i=s(3665),a=s(4355);e.default=class{static create(t){if(r.default.getAPI()===i.default.WEB_GL){const e=t.getGL();return new a.default(e)}}}},7201:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9921),i=s(3665),a=s(8525);class n{static create2DFullWhiteTexture(t){const e=new Image(1,1);return n.create2DTexture(t,e,4,!0)}static create2DTexture(t,e,s,n=!1){if(r.default.getAPI()===i.default.WEB_GL){const r=t.getGL();return new a.default(r,e,s,n)}}}e.default=n},2420:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(9921),i=s(3665),a=s(4264),n=s(5023),o=s(1253);e.default=class{static createProgram(t,e,s,h){if(r.default.getAPI()===i.default.WEB_GL){const r=t.getGL(),i=new a.default(r,s),l=new n.default(r,h);return new o.default(r,e,i,l)}}}},6668:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(5716),i=s(8191);e.default=class{constructor(t,e){this.logic=e,this.graphicElement=new r.default(t),this.time=new i.default,this.frame=0,this.shouldBeClosed=!1}start(){this.init(),this.startNewFrame()}stop(){this.shouldBeClosed=!0}init(){this.graphicElement.init(),this.logic.init(this.graphicElement)}startNewFrame(){if(this.graphicElement.notExist()||this.shouldBeClosed)return window.cancelAnimationFrame(this.frame),void this.clean();this.frame=window.requestAnimationFrame((t=>this.loop(t)))}loop(t){this.input(),this.update(t),this.render(),this.endFrame(),this.startNewFrame()}input(){this.logic.input()}update(t){this.time.update(t),this.graphicElement.update(),this.logic.update(this.time)}render(){this.graphicElement.render(),this.logic.render()}endFrame(){}clean(){this.logic.clean(),this.graphicElement.destroy()}}},5716:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(8632);e.default=class{constructor(t){this.parentElement=t,this.canvasElement=document.createElement("canvas"),this.canvasElement.style.display="block",this.canvasElement.style.width="100%",this.canvasElement.style.height="100%",this.canvasElement.oncontextmenu=function(){return!1},this.graphicsContext=r.default.createContext(this.canvasElement)}notExist(){return null==this.canvasElement.offsetParent}init(){this.embedToElement(),this.addListenerResizeWindow(),this.graphicsContext.init()}render(){}getGraphicsContext(){return this.graphicsContext}getWidth(){return this.canvasElement.width}getHeight(){return this.canvasElement.height}update(){}destroy(){this.canvasElement.remove()}getCanvasElement(){return this.canvasElement}embedToElement(){this.parentElement.append(this.canvasElement),this.resizeCanvasElement()}addListenerResizeWindow(){window.addEventListener("resize",(()=>this.resizeCanvasElement()))}updateViewport(){this.graphicsContext.setViewport(0,0,this.canvasElement.width,this.canvasElement.height)}resizeCanvasElement(){this.canvasElement.width=this.parentElement.offsetWidth,this.canvasElement.height=this.parentElement.offsetHeight,this.updateViewport()}}},1114:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t="layer"){this.name=t}getName(){return this.name}}},2152:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.layers=[],this.layerInsert=0}push(t){this.layers.splice(this.layerInsert,0,t),t.attach(),this.layerInsert++}pushOverlay(t){this.layers.push(t),t.attach()}clean(){for(;this.layers.length>0;)this.layers.pop()}getLayers(){return this.layers}}},7245:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t){this.arrayMatrix=t}static identity(){return new s([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}getArray(){return this.arrayMatrix}multiplyMatrix(t){const e=this.a11()*t.a11()+this.a12()*t.a21()+this.a13()*t.a31()+this.a14()*t.a41(),r=this.a11()*t.a12()+this.a12()*t.a22()+this.a13()*t.a32()+this.a14()*t.a42(),i=this.a11()*t.a13()+this.a12()*t.a23()+this.a13()*t.a33()+this.a14()*t.a43(),a=this.a11()*t.a14()+this.a12()*t.a24()+this.a13()*t.a34()+this.a14()*t.a44(),n=this.a21()*t.a11()+this.a22()*t.a21()+this.a23()*t.a31()+this.a24()*t.a41(),o=this.a21()*t.a12()+this.a22()*t.a22()+this.a23()*t.a32()+this.a24()*t.a42(),h=this.a21()*t.a13()+this.a22()*t.a23()+this.a23()*t.a33()+this.a24()*t.a43(),l=this.a21()*t.a14()+this.a22()*t.a24()+this.a23()*t.a34()+this.a24()*t.a44(),u=this.a31()*t.a11()+this.a32()*t.a21()+this.a33()*t.a31()+this.a34()*t.a41(),c=this.a31()*t.a12()+this.a32()*t.a22()+this.a33()*t.a32()+this.a34()*t.a42(),d=this.a31()*t.a13()+this.a32()*t.a23()+this.a33()*t.a33()+this.a34()*t.a43(),f=this.a31()*t.a14()+this.a32()*t.a24()+this.a33()*t.a34()+this.a34()*t.a44(),g=this.a41()*t.a11()+this.a42()*t.a21()+this.a43()*t.a31()+this.a44()*t.a41(),x=this.a41()*t.a12()+this.a42()*t.a22()+this.a43()*t.a32()+this.a44()*t.a42(),p=this.a41()*t.a13()+this.a42()*t.a23()+this.a43()*t.a33()+this.a44()*t.a43(),y=this.a41()*t.a14()+this.a42()*t.a24()+this.a43()*t.a34()+this.a44()*t.a44();return new s([e,r,i,a,n,o,h,l,u,c,d,f,g,x,p,y])}a11(){return this.arrayMatrix[0]}a12(){return this.arrayMatrix[1]}a13(){return this.arrayMatrix[2]}a14(){return this.arrayMatrix[3]}a21(){return this.arrayMatrix[4]}a22(){return this.arrayMatrix[5]}a23(){return this.arrayMatrix[6]}a24(){return this.arrayMatrix[7]}a31(){return this.arrayMatrix[8]}a32(){return this.arrayMatrix[9]}a33(){return this.arrayMatrix[10]}a34(){return this.arrayMatrix[11]}a41(){return this.arrayMatrix[12]}a42(){return this.arrayMatrix[13]}a43(){return this.arrayMatrix[14]}a44(){return this.arrayMatrix[15]}transpose(){return new s([this.a11(),this.a21(),this.a31(),this.a41(),this.a12(),this.a22(),this.a32(),this.a42(),this.a13(),this.a23(),this.a33(),this.a43(),this.a14(),this.a24(),this.a34(),this.a44()])}determinant(){const t=this.a33()*this.a44()-this.a43()*this.a34(),e=this.a32()*this.a44()-this.a42()*this.a34(),s=this.a32()*this.a43()-this.a42()*this.a33(),r=this.a31()*this.a44()-this.a41()*this.a34(),i=this.a31()*this.a43()-this.a41()*this.a33(),a=this.a31()*this.a42()-this.a41()*this.a32();return this.a11()*(this.a22()*t-this.a23()*e+this.a24()*s)-this.a12()*(this.a21()*t-this.a23()*r+this.a24()*i)+this.a13()*(this.a21()*e-this.a22()*r+this.a24()*a)-this.a14()*(this.a21()*s-this.a22()*i+this.a23()*a)}}e.default=s},758:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e,s){this.x=t,this.y=e,this.z=s}setX(t){this.x=t}setY(t){this.y=t}setZ(t){this.z=t}getX(){return this.x}getY(){return this.y}getZ(){return this.z}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}getNormalization(){const t=this.getInversionLength();return new s(this.x*t,this.y*t,this.z*t)}getInversionLength(){return 1/this.getLength()}}e.default=s},9693:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class s{constructor(t,e,s,r){this.x=t,this.y=e,this.z=s,this.w=r}setX(t){this.x=t}setY(t){this.y=t}setZ(t){this.z=t}getX(){return this.x}getY(){return this.y}getZ(){return this.z}getW(){return this.w}setW(t){this.w=t}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}getNormalization(){const t=this.getInversionLength();return new s(this.x*t,this.y*t,this.z*t,this.w*t)}getInversionLength(){return 1/this.getLength()}}e.default=s},8144:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(758),i=s(7245);class a{static getWorldMatrix(t,e,s){const r=this.getTranslationMatrix(i.default.identity(),t),n=this.getRotationXMatrix(r,a.degreesToRadians(e.getX())),o=this.getRotationYMatrix(n,a.degreesToRadians(e.getY())),h=this.getRotationZMatrix(o,a.degreesToRadians(e.getZ()));return this.getScale(h,s)}static getPerspectiveProjectionMatrix(t,e,s,r){const a=1/Math.tan(e/2),n=1/(s-r);return new i.default([a/t,0,0,0,0,a,0,0,0,0,(r+s)*n,-1,0,0,2*r*s*n,0])}static getOrthogonalProjectionMatrix(t,e,s,r,a,n){const o=1/(t-e),h=1/(s-r),l=1/(n-a);return new i.default([-2*o,0,0,0,0,-2*h,0,0,0,0,-2*l,0,(t+e)*o,(r+s)*h,-1*(n+a)*l,1])}static getViewMatrix(t,e){const s=this.getRotationMatrix(i.default.identity(),a.degreesToRadians(e.getX()),new r.default(1,0,0)),n=this.getRotationMatrix(s,a.degreesToRadians(e.getY()),new r.default(0,1,0));return this.getTranslationMatrix(n,new r.default(-t.getX(),-t.getY(),-t.getZ()))}static degreesToRadians(t){return t*(Math.PI/180)}static getTranslationMatrix(t,e){return new i.default([t.a11(),t.a12(),t.a13(),t.a14(),t.a21(),t.a22(),t.a23(),t.a24(),t.a31(),t.a32(),t.a33(),t.a34(),t.a11()*e.getX()+t.a21()*e.getY()+t.a31()*e.getZ()+t.a41(),t.a12()*e.getX()+t.a22()*e.getY()+t.a32()*e.getZ()+t.a42(),t.a13()*e.getX()+t.a23()*e.getY()+t.a33()*e.getZ()+t.a43(),t.a14()*e.getX()+t.a24()*e.getY()+t.a34()*e.getZ()+t.a44()])}static getRotationXMatrix(t,e){const s=Math.sin(e),r=Math.cos(e);return new i.default([t.a11(),t.a12(),t.a13(),t.a14(),t.a21()*r+t.a31()*s,t.a22()*r+t.a32()*s,t.a23()*r+t.a33()*s,t.a24()*r+t.a34()*s,t.a31()*r-t.a21()*s,t.a32()*r-t.a22()*s,t.a33()*r-t.a23()*s,t.a34()*r-t.a24()*s,t.a41(),t.a42(),t.a43(),t.a44()])}static getRotationYMatrix(t,e){const s=Math.sin(e),r=Math.cos(e);return new i.default([t.a11()*r-t.a31()*s,t.a12()*r-t.a32()*s,t.a13()*r-t.a33()*s,t.a14()*r-t.a34()*s,t.a21(),t.a22(),t.a23(),t.a24(),t.a11()*s+t.a31()*r,t.a12()*s+t.a32()*r,t.a13()*s+t.a33()*r,t.a14()*s+t.a34()*r,t.a41(),t.a42(),t.a43(),t.a44()])}static getRotationZMatrix(t,e){const s=Math.sin(e),r=Math.cos(e);return new i.default([t.a11()*r+t.a21()*s,t.a12()*r+t.a22()*s,t.a13()*r+t.a23()*s,t.a14()*r+t.a24()*s,t.a21()*r-t.a11()*s,t.a22()*r-t.a12()*s,t.a23()*r-t.a13()*s,t.a24()*r-t.a14()*s,t.a31(),t.a32(),t.a33(),t.a34(),t.a41(),t.a42(),t.a43(),t.a44()])}static getScale(t,e){return new i.default([t.a11()*e.getX(),t.a12()*e.getX(),t.a13()*e.getX(),t.a14()*e.getX(),t.a21()*e.getY(),t.a22()*e.getY(),t.a23()*e.getY(),t.a24()*e.getY(),t.a31()*e.getZ(),t.a32()*e.getZ(),t.a33()*e.getZ(),t.a34()*e.getZ(),t.a41(),t.a42(),t.a43(),t.a44()])}static getRotationMatrix(t,e,s){const r=Math.sin(e),a=Math.cos(e),n=1-a,o=s.getNormalization(),h=o.getX()*o.getX()*n+a,l=o.getY()*o.getX()*n+o.getZ()*r,u=o.getZ()*o.getX()*n-o.getY()*r,c=o.getX()*o.getY()*n-o.getZ()*r,d=o.getY()*o.getY()*n+a,f=o.getZ()*o.getY()*n+o.getX()*r,g=o.getX()*o.getZ()*n+o.getY()*r,x=o.getY()*o.getZ()*n-o.getX()*r,p=o.getZ()*o.getZ()*n+a;return new i.default([t.a11()*h+t.a21()*l+t.a31()*u,t.a12()*h+t.a22()*l+t.a32()*u,t.a13()*h+t.a23()*l+t.a33()*u,t.a14()*h+t.a24()*l+t.a34()*u,t.a11()*c+t.a21()*d+t.a31()*f,t.a12()*c+t.a22()*d+t.a32()*f,t.a13()*c+t.a23()*d+t.a33()*f,t.a14()*c+t.a24()*d+t.a34()*f,t.a11()*g+t.a21()*x+t.a31()*p,t.a12()*g+t.a22()*x+t.a32()*p,t.a13()*g+t.a23()*x+t.a33()*p,t.a14()*g+t.a24()*x+t.a34()*p,t.a41(),t.a42(),t.a43(),t.a44()])}}e.default=a},9921:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0});const r=s(3665),i=s(9693),a=s(7245),n=s(7201);class o{constructor(){this.whiteColor=null,this.whiteTexture=null,this.viewProjectionMatrix=new a.default([])}static getAPI(){return this.rendererAPI}static setAPI(t){o.rendererAPI=t}begin(t){this.viewProjectionMatrix=t.getViewProjectionMatrix()}end(){}init(t){this.whiteColor=new i.default(1,1,1,1),this.whiteTexture=n.default.create2DFullWhiteTexture(t),this.initImpl()}drawTriangles(t,e,s){this.whiteTexture.bind(0),t.bind(),t.setMatrix4f("u_ViewProjectionMatrix",this.viewProjectionMatrix),t.setMatrix4f("u_WorldMatrix",s),e.bind(),this.drawTrianglesImpl(e),t.unbind(),e.unbind(),this.whiteTexture.unbind()}drawTrianglesWithTexture(t,e,s,r){r.bind(0),t.bind(),t.setMatrix4f("u_ViewProjectionMatrix",this.viewProjectionMatrix),t.setMatrix4f("u_WorldMatrix",s),t.setVector4f("u_Color",this.whiteColor),e.bind(),this.drawTrianglesImpl(e),t.unbind(),e.unbind(),r.unbind()}}o.rendererAPI=r.default.WEB_GL,e.default=o},3665:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.WEB_GL=0]="WEB_GL"}(s||(s={})),e.default=s},9380:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getComponentCountFromShaderDataType=void 0;const r=s(1073);var i;!function(t){t[t.FLOAT_1=r.default.FLOAT.valueOf()]="FLOAT_1",t[t.FLOAT_2=2*r.default.FLOAT.valueOf()]="FLOAT_2",t[t.FLOAT_3=3*r.default.FLOAT.valueOf()]="FLOAT_3",t[t.FLOAT_4=4*r.default.FLOAT.valueOf()]="FLOAT_4",t[t.INT_1=r.default.INT.valueOf()]="INT_1",t[t.INT_2=2*r.default.INT.valueOf()]="INT_2",t[t.INT_3=3*r.default.INT.valueOf()]="INT_3",t[t.INT_4=4*r.default.INT.valueOf()]="INT_4"}(i||(i={})),e.getComponentCountFromShaderDataType=function(t){switch(t){case i.FLOAT_1:return 1;case i.FLOAT_2:return 2;case i.FLOAT_3:return 3;case i.FLOAT_4:return 4;case i.INT_1:return 1;case i.INT_2:return 2;case i.INT_3:return 3;case i.INT_4:return 4}throw new Error("ShaderDataType [ "+t+" ] not supported")},e.default=i},1893:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.shaderPrograms=new Map}add(t){this.shaderPrograms.set(t.getName(),t)}get(t){const e=this.shaderPrograms.get(t);if(!e)throw new Error("Shader program by name [ "+t+" ] not found in library");return e}clean(){this.shaderPrograms.clear()}}},1073:(t,e)=>{var s;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.FLOAT=4]="FLOAT",t[t.INT=4]="INT",t[t.UNSIGNED_INT=4]="UNSIGNED_INT"}(s||(s={})),e.default=s},8191:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t=0){this.timestamp=t,this.deltaTime=0}update(t){this.deltaTime=t-this.timestamp,this.timestamp=t}getTimestamp(){return this.timestamp}getDeltaTime(){return this.deltaTime}}}},e={};function s(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,s),a.exports}s.d=(t,e)=>{for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;s.g.importScripts&&(t=s.g.location+"");var e=s.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var i=r.length-1;i>-1&&!t;)t=r[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),s.p=t})(),(()=>{const t=s(1969),e=s(3325),r=document.getElementById("game");if(!r)throw new Error("Game element nof found");new t.default(r,new e.default).start()})()})();